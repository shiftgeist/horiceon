#!/bin/sh

set -e

cli_help() {
  cli_name=${0##*/}
  echo "
$cli_name
Brot and Games CLI
Usage: $cli_name [command]
Commands:
  code      vscode extensions
  fzf       install fzf
  go        go packages
  npm       npm global packages
  yay       arch packages
  *         Help
"
  exit 1
}

main() {
    case "$1" in
        code)
            codepkg
            ;;
        fzf)
            fzf
            ;;
        go)
            gopkg
            ;;
        npm)
            npmpkg
            ;;
        yay)
            yaypkg
            ;;
        *)
            cli_help
            ;;
    esac
}

yaypkg() {
    yay -Syu suckless-tools brave-bin spotify notion-app alacritty zsh neofetch htop neovim code rsync rclone openssh go nodejs-lts-erbium npm ttf-dejavu noto-fonts-emoji otf-overpass feh flameshot gpick typora xsel xcape dunst compton bat exa tmux jump-bin
}

zshpkg() {
    mkdir -p "$ZSHPATH"

    cloneModule() {
        cd "$ZSHPATH" || exit
        for n in "$@"; do
            git clone "$n" 2> /dev/null
        done
    }

    cloneModule \
        https://github.com/MichaelAquilina/zsh-you-should-use.git \
        https://github.com/zsh-users/zsh-syntax-highlighting.git \
        https://github.com/sindresorhus/pure.git
}

codepkg() {
    code --install-extension "bierner.markdown-preview-github-styles"
    code --install-extension "editorconfig.editorconfig"
    code --install-extension "esbenp.prettier-vscode"
    code --install-extension "golang.go"
    code --install-extension "ionutvmi.path-autocomplete"
    code --install-extension "naumovs.color-highlight"
    code --install-extension "ow.vscode-subword-navigation"
    code --install-extension "pflannery.vscode-versionlens"
    code --install-extension "tinkertrain.theme-panda"
    code --install-extension "wakatime.vscode-wakatime"
}

npmpkg() {
    npm i -g fx n np doctoc prettier js-beautify tinypng-cli diff-so-fancy npm-check-updates sirv-cli live-server firebase-tools markdownlint-cli
}

fzf() {
    chmod +x ~/.local/src/fzf/install
    ~/.local/src/fzf/install --bin
}

gopkg() {
    go get -u -v github.com/cosmtrek/air github.com/nektos/act github.com/xxxserxxx/gotop/cmd/gotop github.com/yudai/gotty
}

main "$@"
