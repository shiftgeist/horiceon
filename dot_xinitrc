#!/bin/sh

# xinitrc runs automatically when you run startx.

# todo: make it work (xrate, set-prop)
setxkbmap us altgr-intl &
setxkbmap -option caps:escape -option lv3:ralt_switch & # Map the caps lock key to escape
xinput set-prop 11 290 1 &                              # Touchpad libinput Tapping Enabled
xrdb "$XDG_CONFIG_HOME/Xresources" &                    # Use Xresources colors/settings on startup

eval $(gnome-keyring-daemon --start) # generates GNOME_KEYRING_CONTROL and SSH_AUTH_SOCK
export SSH_AUTH_SOCK

export "$(/usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh,gpg)"

# Start graphical server on tty1 if not already running.
if [ -z "$SSH_AUTH_SOCK" ]; then
  eval $(ssh-agent -s)
  ssh-add ~/.ssh/id_rsa
fi

if [ "$(tty)" = "/dev/tty1" ]; then
  ssh-agent startxfce4
fi
