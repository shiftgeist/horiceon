#!/usr/bin/env denorun

import wake from './deno/wake.ts'

/**
 * @docs xfce genmon docs: https://docs.xfce.org/panel-plugins/xfce4-genmon-plugin/start
 */
function barOutput(output: string) {
  console.log(
    `<txt>${output}</txt><txtclick>xdg-open https://wttr.in</txtclick>`
  )
}

async function main() {
  const { airtemp, desc, watertemp, windspeed } = await wake()

  barOutput(`🌡️ ${airtemp}°C 🌊 ${watertemp}°C 🌬️ ${windspeed}Kmph "${desc}"`)
}

await main()
